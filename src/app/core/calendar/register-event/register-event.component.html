<div
  class="fixed inset-0 bg-black/50 z-50 flex justify-end overflow-y-auto"
  tabindex="-1"
  >
  <div
    class="bg-white w-full max-w-md h-full p-6 shadow-xl overflow-y-auto transform transition-transform duration-300 translate-x-0"
    >
    <h2 class="text-2xl font-bold text-center text-gray-800 mb-6">
      New calendar event
    </h2>
    <form [formGroup]="eventForm" (ngSubmit)="submit()" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-1" for="title">
          Title
        </label>
        <input
          id="title"
          type="text"
          formControlName="title"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        @if (
          eventForm.get('title')?.invalid && eventForm.get('title')?.touched
          ) {
          <div
            class="text-red-600 text-sm mt-1"
            >
            Title is required
          </div>
        }
      </div>

      <div>
        <label
          class="block text-sm font-medium text-gray-700 mb-1"
          for="startDate"
          >
          Start date
        </label>
        <input
          id="startDate"
          type="datetime-local"
          formControlName="startDate"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        @if (
          eventForm.get('startDate')?.invalid &&
          eventForm.get('startDate')?.touched
          ) {
          <div
            class="text-red-600 text-sm mt-1"
            >
            Start date is required
          </div>
        }
      </div>
      <div class="flex items-center">
        <input
          cdk-checkbox
          id="allDay"
          type="checkbox"
          formControlName="allDay"
          class="mr-2"
          />
        <label for="allDay" class="font-medium">All Day</label>
      </div>
      @if (!allDay) {
        <div>
          <label
            class="block text-sm font-medium text-gray-700 mb-1"
            for="endDate"
            >
            End date
          </label>
          <input
            id="endDate"
            type="datetime-local"
            formControlName="endDate"
            class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          @if (
            eventForm.get('endDate')?.invalid &&
            eventForm.get('endDate')?.touched
            ) {
            <div
              class="text-red-600 text-sm mt-1"
              >
              End date is required
            </div>
          }
        </div>
      }

      <div>
        <label
          for="location"
          class="block text-sm font-medium text-gray-700 mb-1"
          >
          Location
        </label>
        <input
          id="location"
          type="text"
          formControlName="location"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
        @if (
          eventForm.get('location')?.invalid &&
          eventForm.get('location')?.touched
          ) {
          <div
            class="text-red-600 text-sm mt-1"
            >
            Location is required
          </div>
        }
      </div>

      <div>
        <label for="label" class="block text-sm font-medium text-gray-700 mb-1">
          Label
        </label>
        <input
          id="label"
          type="text"
          formControlName="label"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500"
          />
      </div>

      <div class="flex items-center gap-2">
        <label for="color" class="block text-sm font-medium text-gray-700 mb-1">
          Color
        </label>
        <input
          id="color"
          type="color"
          formControlName="color"
          class="w-16 h-10 border-none p-0"
          />
      </div>
      <div class="flex items-center gap-2">
        <label
          for="description"
          class="block text-sm font-medium text-gray-700 mb-1"
          >
          Description
        </label>
        <textarea
          id="description"
          formControlName="description"
          class="w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
          rows="3"
          placeholder="Event description"
        ></textarea>
      </div>

      <div class="flex justify-end gap-2">
        <button
          type="submit"
          class="px-4 w-25 bg-blue-600 text-white font-semibold py-2 rounded-xl hover:bg-blue-700 transition disabled:opacity-50l"
          >
          Save
        </button>

        <button
          type="button"
          (click)="close.emit()"
          class="absolute top-4 right-4 text-gray-500 hover:text-gray-700"
          aria-label="Close"
          >
          âœ•
        </button>
      </div>
      @if (error) {
        <p class="text-red-500 text-sm text-center mt-2">
          {{ error }}
        </p>
      }

      @if (success) {
        <p class="text-green-600 text-sm text-center mt-2">
          Event created successfully!
        </p>
      }
    </form>
  </div>
</div>
